<!-- ===============================================EVALUATION FORM========================================================= -->

<div class="form-container">
  <h1 class="evaluation-form-name" *ngIf="(evaluationForm | async); let evalForm">{{evalForm.name}}</h1>
  <p-accordion [multiple]="true" *ngFor="let formSection of (evaluationForm | async)?.formSections">
    <p-accordionTab>

      <ng-template pTemplate="header">
        
          <div class="w-100 d-flex flex-column">
            <div class="section-name-container">
              {{formSection.name}}
            </div>
            <div class="section-desc-container">
              {{formSection.description}}
            </div>
          </div>
         
        
        
      </ng-template>
      <div class="row d-none d-lg-flex w-100 criteria-header">
            <div class="col-8">              
                <span> </span>             
            </div>
            <div class="col-3 d-flex justify-content-between ">              
                  
                      <div>Never</div>
                      <div>Rarely</div>
                      <div>Often</div>
                                
            </div>
            <div class="col-1"></div>
      </div>  

     

      <div class="row w-100 criteria-entry" *ngFor="let formCriteria of formSection.formCriteria">
        <div class="col-12 col-lg-8 d-flex flex-column">
          <div class="criteria-name">{{formCriteria.name}}</div>
          <div class="criteria-description">{{formCriteria.description}}</div>
        </div>
        <div class="col-12 col-lg-1 d-flex justify-content-lg-center align-items-center">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{formCriteria.id}}" id="{{formCriteria.id}}_never" value="never" (change)="onCriteriaChange($event)">
            <label class="form-check-label d-flex d-lg-none" for="{{formCriteria.id}}_never">
              Never
            </label>
          </div>
        </div>
        <div class="col-12 col-lg-1 d-flex justify-content-lg-center align-items-center">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{formCriteria.id}}" id="{{formCriteria.id}}_rarely" value="rarely" (change)="onCriteriaChange($event)">
            <label class="form-check-label d-flex d-lg-none" for="{{formCriteria.id}}_rarely">
              Rarely
            </label>
          </div>
        </div>
        <div class="col-12 col-lg-1  d-flex justify-content-lg-center align-items-center">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{formCriteria.id}}" id="{{formCriteria.id}}_often" value="often" (change)="onCriteriaChange($event)">
            <label class="form-check-label d-flex d-lg-none" for="{{formCriteria.id}}_often">
              Often
            </label>
          </div>
        </div>
        <div class="col-12 col-lg-1  d-flex justify-content-lg-center align-items-center">
          
            <button pButton title="Comments" class="p-button-text p-button-help"(click)="showAddCommDialog(formCriteria)" icon="pi pi-comment"></button>
            <button pButton title="Reviews" class="p-button-text p-button-help" (click)="showAddRevDialog(formCriteria.id!)" icon="pi pi-comment"></button>
         
        </div>
     
         
        
      </div>
    </p-accordionTab>
    
    
  </p-accordion>
</div>


    <!-- ==================================================MODAL FOR ADDING A COMMENT==================================================================== -->

<p-dialog header="Add Comment" [(visible)]="displayAddCommModal" [modal]="true" [style]="{width: '550px'}" 
  [draggable]="false" [resizable]="false">
  <form [formGroup]="addCommForm">
    <label for="float-input">Comment</label>
    <br />
    <input placeholder="Add comment" id="float-input" type="text" pInputText formControlName="criteriaComment" [style]="{width: '100%'}"/>
  </form>
  <div class="buttons-container">
    <button pButton pRipple type="submit" label="Close" (click) = "hideAddCommDialog()" 
      class="modal-button btn-pos p-button-danger"></button>

    <button pButton pRipple type="submit" label="Submit" (click)="addComm()" [disabled]="!addCommForm.valid"
      class="modal-button btn-pos p-button-success"></button>
  </div>
  </p-dialog>

  <!-- ==================================================MODAL FOR ADDING A REVIEW==================================================================== -->

<p-dialog header="Add Review" [(visible)]="displayAddRevModal" [modal]="true" [style]="{width: '550px'}" 
[draggable]="false" [resizable]="false">
<form [formGroup]="addRevForm">
  <label for="float-input">Review</label>
  <br />
  <input placeholder="Add review" id="float-input" type="text" pInputText formControlName="review" [style]="{width: '100%'}"/>
</form>
<div class="buttons-container">
  <button pButton pRipple type="submit" label="Close" (click) = "hideAddRevDialog()" 
    class="modal-button btn-pos p-button-danger"></button>

  <button pButton pRipple type="submit" label="Submit" (click)="addReview()" [disabled]="!addRevForm.valid"
    class="modal-button btn-pos p-button-success"></button>
</div>
</p-dialog>